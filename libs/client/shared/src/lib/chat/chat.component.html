<div class="w-full h-full flex flex-col">
  <div class="h-5/6 w-full p-2 overflow-auto scroll-smooth" #scrollMe>
    <div *ngFor="let chat of _messageList | async; let last = last" class="w-full">
      <ng-container *ngIf="chat.from === this.currentUser?.id;else contactMsg">
        <div class="p-2 flex justify-end">
          <my-chat-app-card [card]="{message : chat?.message , created_at : chat?.created_at, username : currentUser?.username, image : currentUser?.image}"></my-chat-app-card>
        </div>
      </ng-container>
      <ng-template #contactMsg>
        <div class="p-2 flex justify-start">
          <my-chat-app-card [card]="{message : chat?.message , created_at : chat?.created_at, username : contactUser?.username, image : contactUser?.image}"></my-chat-app-card>
        </div>
      </ng-template>
    </div>
    <div *ngIf="!contactUser" class="w-full h-full flex justify-center items-center">
      <h3 class="text-slate-500">Select your friend to chat ðŸ’¬</h3>
    </div>
  </div>
  <div class="h-1/6 w-full p-2">
    <div class="w-full h-full" *ngIf="contactUser">
      <mat-form-field appearance="fill" class="w-11/12">
        <mat-label>{{messageText}}</mat-label>
        <input matInput [(ngModel)]="message" autocomplete="off">
        <button class="p-2 text-green-600" matPrefix mat-fab-button (click)="callUser()"><mat-icon>call</mat-icon></button>
        <button class="p-2 dark:text-black" matSuffix mat-fab-button [matMenuTriggerFor]="menu"><mat-icon>sentiment_very_satisfied</mat-icon></button>
      </mat-form-field>
      <button class="w-1/12 p-2" (click)="send()" matSuffix mat-fab-button><mat-icon color="text-gray-800">send</mat-icon></button>
    </div>
  </div>
</div>

<mat-menu #menu="matMenu" class="menu">
  <emoji-mart
  class="picker"
  title="Pick your emojiâ€¦"
  emoji="point_up"
  (emojiSelect)="handleEmoji($event)"
  [darkMode]="toggle?.darkMode"
></emoji-mart>
</mat-menu>

